/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
 buildscript {
	 ext{
		 kotlin_version = '1.3.20'
		 spring_boot_version = '2.1.2.RELEASE'
		 spring_dep_mgmt_version = '1.0.6.RELEASE'
	 }

	 repositories {
		 mavenCentral()
		 maven {
			 url "https://plugins.gradle.org/m2/"
		 }
	 }

	 dependencies {
		 classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlin_version}")
		 classpath("org.jetbrains.kotlin:kotlin-allopen:${kotlin_version}")
		 classpath("org.springframework.boot:spring-boot-gradle-plugin:${spring_boot_version}")
		 classpath("io.spring.gradle:dependency-management-plugin:${spring_dep_mgmt_version}")

	 }
 }

allprojects {
	group = 'ch.phildev.evidence.k8'
}

subprojects{
	buildscript {
		repositories {
			mavenCentral()
			maven {
				url "https://plugins.gradle.org/m2/"
			}
		}
		dependencies {
			classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlin_version}")
			classpath("org.jetbrains.kotlin:kotlin-allopen:${kotlin_version}")
			classpath("org.springframework.boot:spring-boot-gradle-plugin:${spring_boot_version}")
			classpath("io.spring.gradle:dependency-management-plugin:${spring_dep_mgmt_version}")

		}
	}

	apply plugin: 'java'
	apply plugin: 'kotlin'
	apply plugin: 'kotlin-spring'
	// apply plugin: 'application'
	apply plugin: 'org.springframework.boot'
	apply plugin: 'io.spring.dependency-management'

	sourceCompatibility = '1.8'

	repositories {
		mavenCentral()
		maven {
			url "https://plugins.gradle.org/m2/"
		}
	}

	dependencies {
		implementation 'org.springframework.boot:spring-boot-starter-security'
		implementation 'org.springframework.boot:spring-boot-starter-webflux'
		implementation 'com.fasterxml.jackson.module:jackson-module-kotlin'
		implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
		implementation "org.jetbrains.kotlin:kotlin-reflect"
		testImplementation 'org.springframework.boot:spring-boot-starter-test'
		testImplementation 'io.projectreactor:reactor-test'
		testImplementation 'org.springframework.restdocs:spring-restdocs-mockmvc'
		testImplementation 'org.springframework.security:spring-security-test'

	}

	compileKotlin {
		kotlinOptions {
			freeCompilerArgs = ['-Xjsr305=strict']
			jvmTarget = '1.8'
		}
	}

	compileTestKotlin {
		kotlinOptions {
			freeCompilerArgs = ['-Xjsr305=strict']
			jvmTarget = '1.8'
		}
	}
}
